{"version":3,"sources":["index.js"],"names":["PhoenixLiveViewDropzone","node","document","createElement","el","appendChild","liveView","flags","dataset","buttonText","fileTypes","split","app","Elm","Main","init","ports","requestUrl","subscribe","data","pushEvent","uploadStatus","dataId","id","dataUrl","url","addUploadUrl","send"],"mappings":";;;AAAA,aA0CeA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,QAAAA,QAAAA,6BAAAA,EAxCf,IAAA,EAAA,QAAA,cAwCeA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EAtCFA,IAAAA,EAAAA,WAsCEA,SAAAA,IAAAA,EAAAA,KAAAA,GAAAA,OAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,UArCH,MAAA,WACJC,IAAAA,EAAOC,SAASC,cAAc,OAC7BC,KAAAA,GAAGC,YAAYJ,GAEhBK,IAAAA,EAAW,KAKXC,EAAQ,GAER,KAAKH,GAAGI,QAAQC,aAClBF,EAAME,WAAa,KAAKL,GAAGI,QAAQC,YAGjC,KAAKL,GAAGI,QAAQE,YAClBH,EAAMG,UAAY,KAAKN,GAAGI,QAAQE,UAAUC,MAAM,MAG/CC,KAAAA,IAAMC,EAAIC,IAAAA,KAAKC,KAAK,CAACR,MAAOA,EAAON,KAAMA,IACzCW,KAAAA,IAAII,MAAMC,WAAWC,UAdR,SAACC,GAASb,OAAAA,EAASc,UAAU,eAAe,CAAC,eAAgBD,MAe1EP,KAAAA,IAAII,MAAMK,aAAaH,UAdT,SAACC,GAASb,OAAAA,EAASc,UAAU,eAAgB,CAAC,cAAeD,MAgB3EG,KAAAA,OAAS,KAAKlB,GAAGI,QAAQe,GACzBC,KAAAA,QAAU,KAAKpB,GAAGI,QAAQiB,MAapBzB,CAAAA,IAAAA,UAVH,MAAA,WACJQ,IAAAA,EAAU,KAAKJ,GAAGI,QAClBA,GAAW,KAAKc,SAAWd,EAAQe,IAAM,KAAKC,UAAYhB,EAAQiB,MAC/DH,KAAAA,OAASd,EAAQe,GACjBC,KAAAA,QAAUhB,EAAQiB,IAClBb,KAAAA,IAAII,MAAMU,aAAaC,KAAK,CAACJ,GAAI,KAAKD,OAAQG,IAAK,KAAKD,eAKpDxB,EAtCFA,GAsCEA,QAAAA,wBAAAA,EAAAA,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA","file":"dist.js","sourceRoot":"../../src","sourcesContent":["'use strict';\n\nimport { Elm } from \"./Main.elm\";\n\nexport class PhoenixLiveViewDropzone {\n  mounted() {\n    var node = document.createElement(\"div\");\n    this.el.appendChild(node);\n\n    var liveView = this;\n\n    var generateUrl = (data) => liveView.pushEvent(\"phx-dropzone\",[\"generate-url\", data]);\n    var statusUpdate = (data) => liveView.pushEvent(\"phx-dropzone\", [\"file-status\", data]);\n\n    var flags = {};\n\n    if (this.el.dataset.buttonText) {\n      flags.buttonText = this.el.dataset.buttonText;\n    }\n\n    if (this.el.dataset.fileTypes) {\n      flags.fileTypes = this.el.dataset.fileTypes.split(\",\");\n    }\n\n    this.app = Elm.Main.init({flags: flags, node: node});\n    this.app.ports.requestUrl.subscribe(generateUrl);\n    this.app.ports.uploadStatus.subscribe(statusUpdate);\n\n    this.dataId = this.el.dataset.id;\n    this.dataUrl = this.el.dataset.url;\n  }\n\n  updated() {\n    var dataset = this.el.dataset;\n    if (dataset && this.dataId !== dataset.id && this.dataUrl !== dataset.url) {\n      this.dataId = dataset.id;\n      this.dataUrl = dataset.url;\n      this.app.ports.addUploadUrl.send({id: this.dataId, url: this.dataUrl});\n    }\n  }\n}\n\nexport default PhoenixLiveViewDropzone;\n"]}