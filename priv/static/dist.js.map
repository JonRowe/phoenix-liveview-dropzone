{"version":3,"sources":["index.js"],"names":["PhoenixLiveViewDropzone","node","document","createElement","el","appendChild","liveView","app","Elm","Main","init","flags","ports","requestUrl","subscribe","fileId","pushEvent","notifyUploadStatus","result","dataId","dataset","id","dataUrl","url","addUploadUrl","send"],"mappings":";;;AAAA,aAgCeA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,QAAAA,QAAAA,6BAAAA,EA9Bf,IAAA,EAAA,QAAA,cA8BeA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EA5BFA,IAAAA,EAAAA,WA4BEA,SAAAA,IAAAA,EAAAA,KAAAA,GAAAA,OAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,UA3BH,MAAA,WACJC,IAAAA,EAAOC,SAASC,cAAc,OAC7BC,KAAAA,GAAGC,YAAYJ,GAEhBK,IAAAA,EAAW,KAKVC,KAAAA,IAAMC,EAAIC,IAAAA,KAAKC,KAAK,CAACC,MAAO,GAAIV,KAAMA,IACtCM,KAAAA,IAAIK,MAAMC,WAAWC,UAJR,SAACC,GAAWT,OAAAA,EAASU,UAAU,iCAAkCD,KAK9ER,KAAAA,IAAIK,MAAMK,mBAAmBH,UAJb,SAACI,GAAWZ,OAAAA,EAASU,UAAU,sBAAuBE,KAMtEC,KAAAA,OAAS,KAAKf,GAAGgB,QAAQC,GACzBC,KAAAA,QAAU,KAAKlB,GAAGgB,QAAQG,MAapBvB,CAAAA,IAAAA,UAVH,MAAA,WACJoB,IAAAA,EAAU,KAAKhB,GAAGgB,QAClBA,GAAW,KAAKD,SAAWC,EAAQC,IAAM,KAAKC,UAAYF,EAAQG,MAC/DJ,KAAAA,OAASC,EAAQC,GACjBC,KAAAA,QAAUF,EAAQG,IAClBhB,KAAAA,IAAIK,MAAMY,aAAaC,KAAK,KAAKH,cAK7BtB,EA5BFA,GA4BEA,QAAAA,wBAAAA,EAAAA,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA","file":"dist.js","sourceRoot":"../../src","sourcesContent":["'use strict';\n\nimport { Elm } from \"./Main.elm\";\n\nexport class PhoenixLiveViewDropzone {\n  mounted() {\n    var node = document.createElement(\"div\");\n    this.el.appendChild(node);\n\n    var liveView = this;\n\n    var generateUrl = (fileId) => liveView.pushEvent(\"phx-dropzone-generate-file-url\", fileId);\n    var onStatusUpdate = (result) => liveView.pushEvent(\"phx-dropzone-status\", result);\n\n    this.app = Elm.Main.init({flags: {}, node: node});\n    this.app.ports.requestUrl.subscribe(generateUrl);\n    this.app.ports.notifyUploadStatus.subscribe(onStatusUpdate);\n\n    this.dataId = this.el.dataset.id;\n    this.dataUrl = this.el.dataset.url;\n  }\n\n  updated() {\n    var dataset = this.el.dataset;\n    if (dataset && this.dataId !== dataset.id && this.dataUrl !== dataset.url) {\n      this.dataId = dataset.id;\n      this.dataUrl = dataset.url;\n      this.app.ports.addUploadUrl.send(this.dataUrl);\n    }\n  }\n}\n\nexport default PhoenixLiveViewDropzone;\n"]}